<div class="min-h-screen bg-white text-black">
  <!-- Top bar -->
  <header class="fixed top-0 left-0 right-0 h-14 border-b border-black/10 bg-white/80 backdrop-blur z-50 flex items-center shadow-sm">
    <div class="px-4 w-full flex items-center justify-between">
      <button type="button" (click)="toggleSidebar()" aria-label="Abrir menu" class="p-2 rounded-md hover:bg-black/5 active:bg-black/10 transition">
        <!-- Hamburger icon -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5M3.75 17.25h16.5" />
        </svg>
      </button>
      <div class="font-semibold tracking-tight">Meu Sistema</div>
      <div class="w-6"></div>
    </div>
  </header>

  <!-- Layout container -->
  <div class="pt-14 flex min-h-screen">
    <!-- Sidebar -->
    <aside
      class="fixed top-14 bottom-0 left-0 z-40 w-72 md:w-64 bg-white border-r border-black/10 shadow-xl md:shadow-md transform transition-transform duration-300 md:translate-x-0 overflow-y-auto"
      [ngClass]="{ '-translate-x-full': !isSidebarOpen(), 'translate-x-0': isSidebarOpen() }"
    >
      <div class="h-14 md:hidden flex items-center justify-between px-4 border-b border-black/10">
        <div class="font-medium">Navegação</div>
        <button type="button" (click)="closeSidebar()" aria-label="Fechar menu" class="p-2 rounded-md hover:bg-black/5">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <nav class="py-3">
        <!-- GPS group with accordion -->
        <div class="px-2">
          <button type="button" class="w-full flex items-center justify-between gap-3 px-2 py-2 text-sm hover:bg-black/5 rounded"
                  (click)="toggleGps()">
            <span class="flex items-center gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9 9 0 100-18 9 9 0 000 18zm0 0l3-3m-3 3l-3-3m3 3V9" />
              </svg>
              <span>GPS</span>
            </span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 transition-transform" [ngClass]="{ 'rotate-180': isGpsOpen() }">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 9l6 6 6-6" />
            </svg>
          </button>

          <!-- Subitems -->
          @if (isGpsOpen()) {
            <div class="mt-1 ml-7 flex flex-col">
              <a routerLink="/gps/localizacao-atual" routerLinkActive="bg-black/5" (click)="closeSidebar()" class="px-2 py-1.5 text-xs rounded hover:bg-black/5">Localização Atual</a>
              <a routerLink="/gps/listar-areas-seguras" routerLinkActive="bg-black/5" (click)="closeSidebar()" class="px-2 py-1.5 text-xs rounded hover:bg-black/5">Listar áreas seguras</a>
            </div>
          }
        </div>
      </nav>

      <div class="mt-auto px-4 py-3 border-t border-black/10 text-xs text-black/60">
        Versão 1.0
      </div>
    </aside>

    <!-- Mobile overlay -->
    @if (isSidebarOpen()) {
      <div
        class="fixed inset-0 bg-black/40 backdrop-blur-sm z-40 md:hidden"
        (click)="closeSidebar()"
      ></div>
    }

    <!-- Main content -->
    <main class="relative flex-1 min-w-0 md:ml-64 py-0 px-4 md:px-6 h-[calc(100vh-3.5rem)] overflow-hidden">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>